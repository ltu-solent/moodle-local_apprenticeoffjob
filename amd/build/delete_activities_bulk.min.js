define("local_apprenticeoffjob/delete_activities_bulk",["exports","core/prefetch","core/normalise","core/notification","core/str","core/ajax","core/url"],(function(_exports,_prefetch,_normalise,_notification,_str,_ajax,_url){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Bulk delete activities with a Modal confirm dialogue.
   *
   * @module     local_apprenticeoffjob/delete_activities_bulk
   * @copyright  2024 Southampton Solent University {@link https://www.solent.ac.uk}
   * @author Mark sharp <mark.sharp@solent.ac.uk>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax),_url=_interopRequireDefault(_url);const selectors_activeRows="input.activitycheckbox:checked",selectors_bulkActions="#apprentice_activitiesbulkactions",selectors_table="#apprentice_useractivities_table";_exports.init=()=>{(0,_prefetch.prefetchStrings)("local_apprenticeoffjob",["confirmdelete","deletewarning"]),(0,_prefetch.prefetchStrings)("core",["delete"]),registerEventListeners()};const registerEventListeners=()=>{var _document$querySelect;null===(_document$querySelect=document.querySelector(selectors_bulkActions))||void 0===_document$querySelect||_document$querySelect.addEventListener("change",(e=>{const action=e.target;-1!==action.value.indexOf("#")&&(e.preventDefault(),"#deleteselect"==action.value&&deleteActivitiesConfirm())}))},deleteActivitiesConfirm=()=>{const table=document.querySelector(selectors_table),fullname=table.getAttribute("data-fullname"),userId=table.getAttribute("data-userid"),ids=(0,_normalise.getList)(table.querySelectorAll(selectors_activeRows)).map((item=>item.value));_notification.default.saveCancelPromise((0,_str.get_string)("confirmdelete","local_apprenticeoffjob"),(0,_str.get_string)("deletewarning","local_apprenticeoffjob",{n:ids.length,who:fullname}),(0,_str.get_string)("delete","core")).then((()=>async function(ids,userId){const request={methodname:"local_apprenticeoffjob_delete_activities",args:{activityids:ids}};try{await _ajax.default.call([request])[0],window.location.href=_url.default.relativeUrl("local/apprenticeoffjob/user.php",{userid:userId},!1)}catch(error){_notification.default.exception(error)}}(ids,userId))).catch((()=>{}))}}));

//# sourceMappingURL=delete_activities_bulk.min.js.map